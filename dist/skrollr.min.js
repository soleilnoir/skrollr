/*! skrollr 0.6.5 (2013-05-23) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr | Free to use under terms of MIT license */
!function(a,b,c){"use strict";function d(c){if(e=b.documentElement,f=b.body,R(),U=this,c=c||{},Z=c.constants||{},c.easing)for(var d in c.easing)T[d]=c.easing[d];cb=c.edgeStrategy||"ease",X={beforerender:c.beforerender,render:c.render},Y=c.forceHeight!==!1,Y&&(Cb=c.scale||1),db=c.compensateScrolling!==!1,_=c.smoothScrolling!==!1,ab={targetTop:U.getScrollTop()},Hb=(c.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||a.opera)})(),Hb?(W=b.getElementById("skrollr-body"),W&&qb(),fb(),wb(e,[s,v],[t])):wb(e,[s,u],[t]),U.refresh(),sb(a,"resize orientationchange",tb);var g=S();return function h(){ib(),g(h)}(),U}var e,f,g=a.skrollr={get:function(){return U},init:function(a){return U||new d(a)},VERSION:"0.6.5"},h=Object.prototype.hasOwnProperty,i=a.Math,j=a.getComputedStyle,k="touchstart",l="touchmove",m="touchcancel",n="touchend",o="skrollable",p=o+"-before",q=o+"-between",r=o+"-after",s="skrollr",t="no-"+s,u=s+"-desktop",v=s+"-mobile",w="linear",x=1e3,y=6e-4,z=200,A="start",B="end",C="center",D="bottom",E="___skrollable_id",F=/^\s+|\s+$/g,G=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,H=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,I=/^([a-z\-]+)\[(\w+)\]$/,J=/-([a-z])/g,K=function(a,b){return b.toUpperCase()},L=/[\-+]?[\d]*\.?[\d]+/g,M=/\{\?\}/g,N=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,O=/[a-z\-]+-gradient/g,P="",Q="",R=function(){var a=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(j){var b=j(f,null);for(var c in b)if(P=c.match(a)||+c==c&&b[c].match(a))break;if(!P)return P=Q="",void 0;P=P[0],"-"===P.slice(0,1)?(Q=P,P={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[P]):Q="-"+P.toLowerCase()+"-"}},S=function(){var b=a.requestAnimationFrame||a[P.toLowerCase()+"RequestAnimationFrame"],c=zb();return(Hb||!b)&&(b=function(b){var d=zb()-c,e=i.max(0,33-d);a.setTimeout(function(){c=zb(),b()},e)}),b},T={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-i.cos(a*i.PI)/2+.5},sqrt:function(a){return i.sqrt(a)},outCubic:function(a){return i.pow(a-1,3)+1},bounce:function(a){var b;if(.5083>=a)b=3;else if(.8489>=a)b=9;else if(.96208>=a)b=27;else{if(!(.99981>=a))return 1;b=91}return 1-i.abs(3*i.cos(1.028*a*b)/b)}};d.prototype.refresh=function(a){var d,e,f=!1;for(a===c?(f=!0,V=[],Gb=0,a=b.getElementsByTagName("*")):a=[].concat(a),d=0,e=a.length;e>d;d++){var g=a[d],h=g,i=[],j=_,k=cb;if(g.attributes){for(var l=0,m=g.attributes.length;m>l;l++){var n=g.attributes[l];if("data-anchor-target"!==n.name)if("data-smooth-scrolling"!==n.name)if("data-edge-strategy"!==n.name){var p=n.name.match(G);if(null!==p){var q=p[1];q=q&&Z[q.substr(1)]||0;var r=(0|p[2])+q,s=p[3],t=p[4]||s,u={offset:r,props:n.value,element:g};i.push(u),s&&s!==A&&s!==B?(u.mode="relative",u.anchors=[s,t]):(u.mode="absolute",s===B?u.isEnd=!0:(u.frame=r*Cb,delete u.offset))}}else k=n.value;else j="off"!==n.value;else if(h=b.querySelector(n.value),null===h)throw'Unable to find anchor target "'+n.value+'"'}if(i.length){var v,w,x;!f&&E in g?(x=g[E],v=V[x].styleAttr,w=V[x].classAttr):(x=g[E]=Gb++,v=g.style.cssText,w=vb(g)),V[x]={element:g,styleAttr:v,classAttr:w,anchorTarget:h,keyFrames:i,smoothScrolling:j,edgeStrategy:k},wb(g,[o],[])}}}for(tb(),d=0,e=a.length;e>d;d++){var y=V[a[d][E]];y!==c&&(jb(y),lb(y))}return U},d.prototype.relativeToAbsolute=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top,h=f.bottom-f.top;return b===D?g-=d:b===C&&(g-=d/2),c===D?g+=h:c===C&&(g+=h/2),db&&(g+=U.getScrollTop()),0|g+.5},d.prototype.animateTo=function(a,b){b=b||{};var d=zb(),e=U.getScrollTop();return $={startTop:e,topDiff:a-e,targetTop:a,duration:b.duration||x,startTime:d,endTime:d+(b.duration||x),easing:T[b.easing||w],done:b.done},$.topDiff||($.done&&$.done.call(U,!1),$=c),U},d.prototype.stopAnimateTo=function(){$&&$.done&&$.done.call(U,!0),$=c},d.prototype.isAnimatingTo=function(){return!!$},d.prototype.setScrollTop=function(b,c){return c===!0&&(Eb=b,bb=!0),Hb?(Ib=i.min(i.max(b,0),Bb),W&&rb(W,"transform","translate(0, "+-Ib+"px) "+eb)):a.scrollTo(0,b),U},d.prototype.getScrollTop=function(){return Hb?Ib:a.pageYOffset||e.scrollTop||f.scrollTop||0},d.prototype.on=function(a,b){return X[a]=b,U},d.prototype.off=function(a){return delete X[a],U};var U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb=function(){var b,d,g,h,j,o,p,q,r,s,t;sb(e,[k,l,m,n].join(" "),function(a){a.preventDefault();var e=a.changedTouches[0];switch(h=e.clientY,j=e.clientX,r=a.timeStamp,a.type){case k:b&&b.blur(),b=a.target,d=o=h,g=j,q=r;break;case l:p=h-o,t=r-s,U.setScrollTop(Ib-p),o=h,s=r;break;default:case m:case n:var f=d-h,u=g-j,v=u*u+f*f;if(49>v)return b.focus(),b.click(),void 0;b=c;var w=p/t;w=i.max(i.min(w,3),-3);var x=i.abs(w/y),z=w*x+.5*y*x*x,A=U.getScrollTop()-z,B=0;A>Bb?(B=(Bb-A)/z,A=Bb):0>A&&(B=-A/z,A=0),x*=1-B,U.animateTo(A,{easing:"outCubic",duration:x})}}),a.scrollTo(0,0),e.style.overflow=f.style.overflow="hidden"},gb=function(){var a,b,c,d,e,f,g,h,j;for(h=0,j=V.length;j>h;h++)for(a=V[h],b=a.element,c=a.anchorTarget,d=a.keyFrames,e=0,f=d.length;f>e;e++)g=d[e],"relative"===g.mode&&(pb(b),g.frame=U.relativeToAbsolute(c,g.anchors[0],g.anchors[1])-g.offset,pb(b,!0)),Y&&!g.isEnd&&g.frame>Bb&&(Bb=g.frame);for(Bb=i.max(Bb,ub()),h=0,j=V.length;j>h;h++){for(a=V[h],d=a.keyFrames,e=0,f=d.length;f>e;e++)g=d[e],g.isEnd&&(g.frame=Bb-g.offset);a.keyFrames.sort(Ab)}},hb=function(a,b){for(var c=0,d=V.length;d>c;c++){var e,f,g=V[c],i=g.element,j=g.smoothScrolling?a:b,k=g.keyFrames,l=k[0].frame,m=k[k.length-1].frame,n=l>j,s=j>m,t=k[n?0:k.length-1];if(n||s){if(n&&-1===g.edge||s&&1===g.edge)continue;switch(wb(i,[n?p:r],[p,q,r]),g.edge=n?-1:1,g.edgeStrategy){case"reset":pb(i);continue;case"set":var u=t.props;for(e in u)h.call(u,e)&&(f=ob(u[e].value),rb(i,e,f));continue;default:case"ease":j=t.frame}}else 0!==g.edge&&(wb(i,[o,q],[p,r]),g.edge=0);for(var v=0,w=k.length-1;w>v;v++)if(j>=k[v].frame&&j<=k[v+1].frame){var x=k[v],y=k[v+1];for(e in x.props)if(h.call(x.props,e)){var z=(j-x.frame)/(y.frame-x.frame);z=x.props[e].easing(z),f=nb(x.props[e].value,y.props[e].value,z),f=ob(f),rb(i,e,f)}break}}},ib=function(){var a,b,d=U.getScrollTop(),e=zb();if($)e>=$.endTime?(d=$.targetTop,a=$.done,$=c):(b=$.easing((e-$.startTime)/$.duration),d=0|$.startTop+b*$.topDiff),U.setScrollTop(d);else if(!Hb){var f=ab.targetTop-d;f&&(ab={startTop:Eb,topDiff:d-Eb,targetTop:d,startTime:Fb,endTime:Fb+z}),e<=ab.endTime&&(b=T.sqrt((e-ab.startTime)/z),d=0|ab.startTop+b*ab.topDiff)}if(bb||Eb!==d){Db=d>=Eb?"down":"up",bb=!1;var g={curTop:d,lastTop:Eb,maxTop:Bb,direction:Db},h=X.beforerender&&X.beforerender.call(U,g);h!==!1&&(hb(d,U.getScrollTop()),Eb=d,X.render&&X.render.call(U,g)),a&&a.call(U,!1)}Fb=e},jb=function(a){for(var b=0,c=a.keyFrames.length;c>b;b++){for(var d,e,f,g,h=a.keyFrames[b],i={};null!==(g=H.exec(h.props));)f=g[1],e=g[2],d=f.match(I),null!==d?(f=d[1],d=d[2]):d=w,e=e.indexOf("!")?kb(e):[e.slice(1)],i[f]={value:e,easing:T[d]};h.props=i}},kb=function(a){var b=[];return N.lastIndex=0,a=a.replace(N,function(a){return a.replace(L,function(a){return 100*(a/255)+"%"})}),Q&&(O.lastIndex=0,a=a.replace(O,function(a){return Q+a})),a=a.replace(L,function(a){return b.push(+a),"{?}"}),b.unshift(a),b},lb=function(a){var b,c,d={};for(b=0,c=a.keyFrames.length;c>b;b++)mb(a.keyFrames[b],d);for(d={},b=a.keyFrames.length-1;b>=0;b--)mb(a.keyFrames[b],d)},mb=function(a,b){var c;for(c in b)h.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},nb=function(a,b,c){var d,e=a.length;if(e!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var f=[a[0]];for(d=1;e>d;d++)f[d]=a[d]+(b[d]-a[d])*c;return f},ob=function(a){var b=1;return M.lastIndex=0,a[0].replace(M,function(){return a[b++]})},pb=function(a,b){a=[].concat(a);for(var c,d,e=0,f=a.length;f>e;e++)d=a[e],c=V[d[E]],c&&(b?(d.style.cssText=c.dirtyStyleAttr,wb(d,c.dirtyClassAttr)):(c.dirtyStyleAttr=d.style.cssText,c.dirtyClassAttr=vb(d),d.style.cssText=c.styleAttr,wb(d,c.classAttr)))},qb=function(){eb="translateZ(0)",rb(W,"transform",eb);var a=j(W),b=a.getPropertyValue("transform"),c=a.getPropertyValue(Q+"transform"),d=b&&"none"!==b||c&&"none"!==c;d||(eb="")},rb=g.setStyle=function(a,b,c){var d=a.style;if(b=b.replace(J,K).replace("-",""),"zIndex"===b)d[b]=""+(0|c);else if("float"===b)d.styleFloat=d.cssFloat=c;else try{P&&(d[P+b.slice(0,1).toUpperCase()+b.slice(1)]=c),d[b]=c}catch(e){}},sb=g.addEvent=function(b,c,d){var e=function(b){return b=b||a.event,b.target||(b.target=b.srcElement),b.preventDefault||(b.preventDefault=function(){b.returnValue=!1}),d.call(this,b)};c=c.split(" ");for(var f=0,g=c.length;g>f;f++)b.addEventListener?b.addEventListener(c[f],d,!1):b.attachEvent("on"+c[f],e)},tb=function(){var a=U.getScrollTop();Bb=0,Y&&!Hb&&(f.style.height="auto"),gb(),Y&&!Hb&&(f.style.height=Bb+e.clientHeight+"px"),Hb?U.setScrollTop(i.min(U.getScrollTop(),Bb)):U.setScrollTop(a,!0),bb=!0},ub=function(){var a=W&&W.offsetHeight||0,b=i.max(a,f.scrollHeight,f.offsetHeight,e.scrollHeight,e.offsetHeight,e.clientHeight);return b-e.clientHeight},vb=function(b){var c="className";return a.SVGElement&&b instanceof a.SVGElement&&(b=b[c],c="baseVal"),b[c]},wb=function(b,d,e){var f="className";if(a.SVGElement&&b instanceof a.SVGElement&&(b=b[f],f="baseVal"),e===c)return b[f]=d,void 0;for(var g=b[f],h=0,i=e.length;i>h;h++)g=yb(g).replace(yb(e[h])," ");g=xb(g);for(var j=0,k=d.length;k>j;j++)-1===yb(g).indexOf(yb(d[j]))&&(g+=" "+d[j]);b[f]=xb(g)},xb=function(a){return a.replace(F,"")},yb=function(a){return" "+a+" "},zb=Date.now||function(){return+new Date},Ab=function(a,b){return a.frame-b.frame},Bb=0,Cb=1,Db="down",Eb=-1,Fb=zb(),Gb=0,Hb=!1,Ib=0}(window,document);